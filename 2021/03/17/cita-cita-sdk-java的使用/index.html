<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>cita-sdk-java的使用 | Tim&#39;s Blog</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="logo.png">
    <meta name="description" content="
jdk 1.8 （可通过 java -version 查看版本）
IDEA 2020
二、创建项目
File-&gt;New Project
66a2g1.png
为项目和GroupId命名 ...">
    
    <link rel="preload" href="/blog/assets/css/0.styles.15dc303e.css" as="style"><link rel="preload" href="/blog/assets/js/app.291cba69.js" as="script"><link rel="preload" href="/blog/assets/js/6.9e2f87d1.js" as="script"><link rel="preload" href="/blog/assets/js/3.ee97f597.js" as="script"><link rel="preload" href="/blog/assets/js/20.92b7bb8c.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.85eec256.js"><link rel="prefetch" href="/blog/assets/js/11.e8cd5ec4.js"><link rel="prefetch" href="/blog/assets/js/12.e3eec23a.js"><link rel="prefetch" href="/blog/assets/js/13.f2e02d5d.js"><link rel="prefetch" href="/blog/assets/js/14.2e1379af.js"><link rel="prefetch" href="/blog/assets/js/15.6962b1c6.js"><link rel="prefetch" href="/blog/assets/js/16.adae4633.js"><link rel="prefetch" href="/blog/assets/js/17.2981595f.js"><link rel="prefetch" href="/blog/assets/js/18.5c3d2e48.js"><link rel="prefetch" href="/blog/assets/js/19.578d7149.js"><link rel="prefetch" href="/blog/assets/js/21.c8450320.js"><link rel="prefetch" href="/blog/assets/js/22.f7b99824.js"><link rel="prefetch" href="/blog/assets/js/23.9922bce4.js"><link rel="prefetch" href="/blog/assets/js/24.bc0d4a10.js"><link rel="prefetch" href="/blog/assets/js/25.54dfa10b.js"><link rel="prefetch" href="/blog/assets/js/26.da4cbff9.js"><link rel="prefetch" href="/blog/assets/js/27.a599e60f.js"><link rel="prefetch" href="/blog/assets/js/28.2a72646b.js"><link rel="prefetch" href="/blog/assets/js/29.9b60bea9.js"><link rel="prefetch" href="/blog/assets/js/30.f64e88d1.js"><link rel="prefetch" href="/blog/assets/js/31.2ea5d619.js"><link rel="prefetch" href="/blog/assets/js/32.c2e851fb.js"><link rel="prefetch" href="/blog/assets/js/33.36b472dd.js"><link rel="prefetch" href="/blog/assets/js/34.3b2d2f0d.js"><link rel="prefetch" href="/blog/assets/js/35.41d78a0e.js"><link rel="prefetch" href="/blog/assets/js/4.62d20898.js"><link rel="prefetch" href="/blog/assets/js/5.28d35512.js"><link rel="prefetch" href="/blog/assets/js/7.63a47d97.js"><link rel="prefetch" href="/blog/assets/js/8.7c3ffbd2.js"><link rel="prefetch" href="/blog/assets/js/9.a0d3f175.js"><link rel="prefetch" href="/blog/assets/js/vuejs-paginate.3626b124.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.15dc303e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="vuepress-theme-blog__global-layout"><section id="header-wrapper"><header id="header"><div class="header-wrapper"><div class="title"><a href="/blog/" class="nav-link home-link">Tim's Blog </a></div> <div class="header-right-wrap"><ul class="nav"><li class="nav-item"><a href="/blog/" class="nav-link">Blog</a></li><li class="nav-item"><a href="/blog/tag/" class="nav-link">Tags</a></li></ul> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></div></header></section> <div id="mobile-header"><div class="mobile-header-bar"><div class="mobile-header-title"><a href="/blog/" class="nav-link mobile-home-link">Tim's Blog </a> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></div> <div class="mobile-menu-wrapper"><hr class="menu-divider"> <ul class="mobile-nav"><li class="mobile-nav-item"><a href="/blog/" class="nav-link">Blog</a></li><li class="mobile-nav-item"><a href="/blog/tag/" class="nav-link">Tags</a></li> <li class="mobile-nav-item"><!----></li></ul></div></div></div> <div class="content-wrapper"><div id="vuepress-theme-blog__post-layout"><article itemscope="itemscope" itemtype="https://schema.org/BlogPosting" class="vuepress-blog-theme-content"><header><h1 itemprop="name headline" class="post-title">
        cita-sdk-java的使用
      </h1> <div class="post-meta"><div itemprop="publisher author" itemtype="http://schema.org/Person" itemscope="itemscope" class="post-meta-author"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-navigation"><polygon points="3 11 22 2 13 21 11 13 3 11"></polygon></svg> <span itemprop="name">Tim</span> <span itemprop="address">   in Guilin</span></div> <div class="post-meta-date"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg> <time pubdate itemprop="datePublished" datetime="2021-3-17">
      2021-03-17
    </time></div> <ul itemprop="keywords" class="post-meta-tags"><li class="post-tag" data-v-42ccfcd5><a href="/blog/tag/CITA" data-v-42ccfcd5><span data-v-42ccfcd5>CITA</span></a></li></ul></div></header> <div itemprop="articleBody" class="content__default"><h3 id="一、环境准备"><a href="#一、环境准备" class="header-anchor">#</a> 一、环境准备</h3> <ul><li>jdk 1.8 （可通过 java -version 查看版本）</li> <li>IDEA 2020</li></ul> <h3 id="二、创建项目"><a href="#二、创建项目" class="header-anchor">#</a> 二、创建项目</h3> <p><code>File-&gt;New Project</code></p> <p><a href="https://imgtu.com/i/66a2g1" target="_blank" rel="noopener noreferrer"><img src="https://s3.ax1x.com/2021/03/17/66a2g1.png" alt="66a2g1.png"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>为项目和<code>GroupId</code>命名</p> <p><a href="https://imgtu.com/i/66ag3R" target="_blank" rel="noopener noreferrer"><img src="https://s3.ax1x.com/2021/03/17/66ag3R.png" alt="66ag3R.png"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>点击<code>Finish</code>完成项目创建</p> <h3 id="三、配置项目"><a href="#三、配置项目" class="header-anchor">#</a> 三、配置项目</h3> <p>打开<code>build.gradle</code>文件，在<code>dependencies</code>中添加<code>compile('com.citahub.cita:core:20.2.0')</code>，然后点击大象图标，让其加载 gradle 配置的变化并下载所需的包</p> <p><a href="https://imgtu.com/i/66aRjx" target="_blank" rel="noopener noreferrer"><img src="https://s3.ax1x.com/2021/03/17/66aRjx.png" alt="66aRjx.png"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>等待加载完成，项目结构如下：</p> <p><a href="https://imgtu.com/i/66acC9" target="_blank" rel="noopener noreferrer"><img src="https://s3.ax1x.com/2021/03/17/66acC9.png" alt="66acC9.png"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="四、样例代码"><a href="#四、样例代码" class="header-anchor">#</a> 四、样例代码</h3> <p>在<code>src/test/java</code>中新建一个类，命名为<code>TestApplication</code>，粘贴以下代码</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>citahub<span class="token punctuation">.</span>cita<span class="token punctuation">.</span>protocol<span class="token punctuation">.</span></span><span class="token class-name">CITAj</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>citahub<span class="token punctuation">.</span>cita<span class="token punctuation">.</span>protocol<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">DefaultBlockParameter</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>citahub<span class="token punctuation">.</span>cita<span class="token punctuation">.</span>protocol<span class="token punctuation">.</span>core<span class="token punctuation">.</span>methods<span class="token punctuation">.</span>request<span class="token punctuation">.</span></span><span class="token class-name">Transaction</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>citahub<span class="token punctuation">.</span>cita<span class="token punctuation">.</span>protocol<span class="token punctuation">.</span>core<span class="token punctuation">.</span>methods<span class="token punctuation">.</span>response<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>citahub<span class="token punctuation">.</span>cita<span class="token punctuation">.</span>protocol<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpService</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>jupiter<span class="token punctuation">.</span>api<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>math<span class="token punctuation">.</span></span><span class="token class-name">BigInteger</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Random</span></span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @ClassName TestApplication
 * @Description TODO
 * @Author 藏剑
 * @Date 2021/3/17 11:20
 * @Version 1.0
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestApplication</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> <span class="token function">testContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> privateKey <span class="token operator">=</span> <span class="token string">&quot;0x5a0257a4778057a8a7d97809bd209055b2fbafa654ce7d31ec7191066b9225e6&quot;</span><span class="token punctuation">;</span> <span class="token comment">// 测试链私钥（有代币）</span>
        <span class="token comment">// 合约的二进制编码</span>
        <span class="token class-name">String</span> contractCode <span class="token operator">=</span> <span class="token string">&quot;60806040526040518060400160405280600381526020017f78746d000000000000000000000000000000000000000000000000000000000081526020015060006000509080519060200190610055929190610069565b503480156100635760006000fd5b50610182565b8280546100759061011b565b90600052602060002090601f01602090048101928261009757600085556100e3565b82601f106100b057805160ff19168380011785556100e3565b828001600101855582156100e3579182015b828111156100e257825182600050909055916020019190600101906100c2565b5b5090506100f091906100f4565b5090565b6100f9565b8082111561011357600081815060009055506001016100f9565b509056610181565b60006002820490506001821680151561013557607f821691505b6020821081141561014957610148610150565b5b505b919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b565b5b61050c806101916000396000f3fe60806040523480156100115760006000fd5b50600436106100465760003560e01c80635353a2d81461004c578063cc80f6f314610068578063d9e0101e1461008657610046565b60006000fd5b6100666004803603810190610061919061029d565b6100b6565b005b6100706100d4565b60405161007d919061031b565b60405180910390f35b6100a0600480360381019061009b919061029d565b61016e565b6040516100ad919061031b565b60405180910390f35b80600060005090805190602001906100cf92919061017d565b505b50565b6060600060005080546100e6906103fa565b80601f0160208091040260200160405190810160405280929190818152602001828054610112906103fa565b801561015f5780601f106101345761010080835404028352916020019161015f565b820191906000526020600020905b81548152906001019060200180831161014257829003601f168201915b5050505050905061016b565b90565b6060819050610178565b919050565b828054610189906103fa565b90600052602060002090601f0160209004810192826101ab57600085556101f7565b82601f106101c457805160ff19168380011785556101f7565b828001600101855582156101f7579182015b828111156101f657825182600050909055916020019190600101906101d6565b5b5090506102049190610208565b5090565b61020d565b80821115610227576000818150600090555060010161020d565b5090566104d5565b600061024261023d84610365565b61033e565b90508281526020810184848401111561025b5760006000fd5b6102668482856103b5565b505b9392505050565b600082601f83011215156102835760006000fd5b813561029384826020860161022f565b9150505b92915050565b6000602082840312156102b05760006000fd5b600082013567ffffffffffffffff8111156102cb5760006000fd5b6102d78482850161026f565b9150505b92915050565b60006102ec82610397565b6102f681856103a3565b93506103068185602086016103c5565b61030f816104c3565b84019150505b92915050565b6000602082019050818103600083015261033581846102e1565b90505b92915050565b600061034861035a565b9050610354828261042f565b5b919050565b600060405190505b90565b600067ffffffffffffffff8211156103805761037f610492565b5b610389826104c3565b90506020810190505b919050565b6000815190505b919050565b60008282526020820190505b92915050565b828183376000838301525b505050565b60005b838110156103e45780820151818401525b6020810190506103c8565b838111156103f3576000848401525b505b505050565b60006002820490506001821680151561041457607f821691505b6020821081141561042857610427610461565b5b505b919050565b610438826104c3565b810181811067ffffffffffffffff8211171561045757610456610492565b5b80604052505b5050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b565b6000601f19601f83011690505b919050565bfea2646970667358221220216651c6cb1eef197c5f43d0f4f2e88c1cbce889b0de4209bdf570845116c56e64736f6c63430008020033&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">CITAj</span> service <span class="token operator">=</span> <span class="token class-name">CITAj</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">HttpService</span><span class="token punctuation">(</span><span class="token string">&quot;https://testnet.citahub.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 与测试链建立连接</span>

        <span class="token comment">// 获取当前块高度</span>
        <span class="token class-name">AppBlockNumber</span> blockNumberResult <span class="token operator">=</span> service<span class="token punctuation">.</span><span class="token function">appBlockNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">BigInteger</span> blockNumber <span class="token operator">=</span> blockNumberResult<span class="token punctuation">.</span><span class="token function">getBlockNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;当前块高度:&quot;</span><span class="token operator">+</span>blockNumber<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 获取测试链的节点数</span>
        <span class="token class-name">NetPeerCount</span> netPeerCount <span class="token operator">=</span> service<span class="token punctuation">.</span><span class="token function">netPeerCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">BigInteger</span> peerCount <span class="token operator">=</span> netPeerCount<span class="token punctuation">.</span><span class="token function">getQuantity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;链上节点数:&quot;</span><span class="token operator">+</span>peerCount<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 部署合约</span>
        <span class="token class-name">AppMetaData</span> appMetaData<span class="token punctuation">;</span>
        appMetaData <span class="token operator">=</span> service<span class="token punctuation">.</span><span class="token function">appMetaData</span><span class="token punctuation">(</span><span class="token class-name">DefaultBlockParameter</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token string">&quot;latest&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 从测试链中获取一些元信息</span>
        <span class="token class-name">String</span> chainIdHex <span class="token operator">=</span> appMetaData<span class="token punctuation">.</span><span class="token function">getAppMetaDataResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getChainIdV1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">BigInteger</span> chainId <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BigInteger</span><span class="token punctuation">(</span>chainIdHex<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> version <span class="token operator">=</span> appMetaData<span class="token punctuation">.</span><span class="token function">getAppMetaDataResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getVersion</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// nonce： 随机数或者通过特定的逻辑生成的随机信息，nonce是为了避免重放攻击。</span>
        <span class="token comment">// quota： 交易执行费用，也就是矿工费，就像以太坊中的 gasPrice * gasLimit。</span>
        <span class="token comment">// valid_until_block： 超时机制，valid_until_block 可以定义的范围是 (currentHeight, currentHeight + 100]。交易在valid_until_block之后会作废。</span>
        <span class="token keyword">long</span> currentHeight <span class="token operator">=</span> service<span class="token punctuation">.</span><span class="token function">appBlockNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getBlockNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">longValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">long</span> validUntilBlock <span class="token operator">=</span> currentHeight <span class="token operator">+</span> <span class="token number">80</span><span class="token punctuation">;</span>
        <span class="token class-name">Random</span> random <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> nonce <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>random<span class="token punctuation">.</span><span class="token function">nextLong</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">long</span> quota <span class="token operator">=</span> <span class="token number">1000000</span><span class="token punctuation">;</span>
        <span class="token class-name">Transaction</span> tx <span class="token operator">=</span> <span class="token class-name">Transaction</span><span class="token punctuation">.</span><span class="token function">createContractTransaction</span><span class="token punctuation">(</span>nonce<span class="token punctuation">,</span> quota<span class="token punctuation">,</span> validUntilBlock<span class="token punctuation">,</span> version<span class="token punctuation">,</span> chainId<span class="token punctuation">,</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span> contractCode<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">String</span> rawTx <span class="token operator">=</span> tx<span class="token punctuation">.</span><span class="token function">sign</span><span class="token punctuation">(</span>privateKey<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 对交易进行签名</span>
        <span class="token class-name">AppSendTransaction</span> deployContractResult <span class="token operator">=</span> service<span class="token punctuation">.</span><span class="token function">appSendRawTransaction</span><span class="token punctuation">(</span>rawTx<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//get receipt and address from transaction</span>
        <span class="token class-name">String</span> txHash <span class="token operator">=</span> deployContractResult<span class="token punctuation">.</span><span class="token function">getSendTransactionResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getHash</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;合约部署的交易哈希:&quot;</span><span class="token operator">+</span>txHash<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">10000</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 链上接收到这笔交易，打包、共识是需要时间的；等待出块后才能查询到交易的回执</span>
        <span class="token class-name">TransactionReceipt</span> txReceipt <span class="token operator">=</span> service<span class="token punctuation">.</span><span class="token function">appGetTransactionReceipt</span><span class="token punctuation">(</span>txHash<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTransactionReceipt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> contractAddr <span class="token operator">=</span> txReceipt<span class="token punctuation">.</span><span class="token function">getContractAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 合约地址</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;合约部署的地址:&quot;</span><span class="token operator">+</span>contractAddr<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>运行查看结果如下：</p> <p><a href="https://imgtu.com/i/66ay4J" target="_blank" rel="noopener noreferrer"><img src="https://s3.ax1x.com/2021/03/17/66ay4J.png" alt="66ay4J.png"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="常见问题"><a href="#常见问题" class="header-anchor">#</a> 常见问题</h3> <ol><li>中文编码乱码</li></ol> <img src="https://pic4.zhimg.com/80/v2-587fe5bdb0d5356f813f349224396d9b_1440w.jpg" alt="img" style="zoom:67%;"> <img src="https://pic3.zhimg.com/80/v2-70a6e1c11c97e3e8615210ad1ffc617a_1440w.jpg" alt="img" style="zoom:67%;"> <h3 id="其他"><a href="#其他" class="header-anchor">#</a> 其他</h3> <p>更多 API 文档请查阅<code>citahub/cita-sdk-java/docs</code></p> <p>供参考的一些链接：</p> <p><a href="https://github.com/citahub/cita-sdk-java" target="_blank" rel="noopener noreferrer">citahub/cita-sdk-java<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://talk.citahub.com/search?q=sdk" target="_blank" rel="noopener noreferrer">社区关于“sdk”的搜索结果<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://talk.citahub.com/t/topic/830" target="_blank" rel="noopener noreferrer">CITA-JAVA-SDK 使用疑问，如何确定一个交易上链成功了？<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://www.w3cschool.cn/gradle/9b5m1htc.html" target="_blank" rel="noopener noreferrer">关于 Gradle<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <footer><!----> <hr> <!----></footer></article> <div class="sticker vuepress-toc"><div class="vuepress-toc-item vuepress-toc-h3 active"><a href="#一、环境准备" title="一、环境准备">一、环境准备</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#二、创建项目" title="二、创建项目">二、创建项目</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#三、配置项目" title="三、配置项目">三、配置项目</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#四、样例代码" title="四、样例代码">四、样例代码</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#常见问题" title="常见问题">常见问题</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#其他" title="其他">其他</a></div></div></div></div> <footer class="footer" data-v-3d9deeb8><div class="footer-left-wrap" data-v-3d9deeb8><ul class="contact" data-v-3d9deeb8><li class="contact-item" data-v-3d9deeb8><a href="https://github.com/zhendexuebuhui" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-3d9deeb8><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github" data-v-3d9deeb8><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22" data-v-3d9deeb8></path></svg>
          
        </a></li><li class="contact-item" data-v-3d9deeb8><a href="mailto:xiongtianminn@163.com" class="nav-link external" data-v-3d9deeb8><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-mail" data-v-3d9deeb8><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z" data-v-3d9deeb8></path><polyline points="22,6 12,13 2,6" data-v-3d9deeb8></polyline></svg>
          
        </a></li><li class="contact-item" data-v-3d9deeb8><a href="https://y.qq.com/n/ryqq/profile/like/playlist" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-3d9deeb8><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-music" data-v-3d9deeb8><path d="M9 18V5l12-2v13" data-v-3d9deeb8></path><circle cx="6" cy="18" r="3" data-v-3d9deeb8></circle><circle cx="18" cy="16" r="3" data-v-3d9deeb8></circle></svg>
          
        </a></li><li class="contact-item" data-v-3d9deeb8><a href="/blog/" class="nav-link" data-v-3d9deeb8><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-globe" data-v-3d9deeb8><circle cx="12" cy="12" r="10" data-v-3d9deeb8></circle><line x1="2" y1="12" x2="22" y2="12" data-v-3d9deeb8></line><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z" data-v-3d9deeb8></path></svg>
          
        </a></li></ul></div> <div class="footer-right-wrap" data-v-3d9deeb8><ul class="copyright" data-v-3d9deeb8><li class="copyright-item" data-v-3d9deeb8><a href="https://policies.google.com/privacy?hl=en-US" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-3d9deeb8>Privacy Policy</a></li><li class="copyright-item" data-v-3d9deeb8>Copyright © 2023</li></ul></div></footer></div><div class="global-ui"><!----></div></div>
    <script src="/blog/assets/js/app.291cba69.js" defer></script><script src="/blog/assets/js/6.9e2f87d1.js" defer></script><script src="/blog/assets/js/3.ee97f597.js" defer></script><script src="/blog/assets/js/20.92b7bb8c.js" defer></script>
  </body>
</html>
